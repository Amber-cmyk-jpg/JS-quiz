
:root{
  --accent1: #00cfff;
  --accent2: #00ff88;
  --card-bg: rgba(255,255,255,0.96);
  --text-strong: #003;
  --muted: #556;
  --shadow: 0 6px 32px rgba(0,0,0,0.12);
  --max-width: 820px;
}

body {
  margin:0; padding:0;
  font-family:'Segoe UI', Arial, sans-serif;
  background: linear-gradient(135deg,var(--accent1),var(--accent2));
  min-height:100vh;
  overflow-x:hidden;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  position:relative;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

#bg-canvas {
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  z-index:0;
}

.centered-container, .result-screen, #leaderboard-container {
  max-width:var(--max-width);
  width:94%;
  margin:48px auto;
  background:var(--card-bg);
  border-radius:18px;
  padding:28px 24px;
  text-align:center;
  box-shadow:var(--shadow);
  position:relative;
  z-index:2;
  animation: fadeIn 0.45s ease;
}

h1,h2 { 
  margin-bottom:12px;
   font-weight:700; 
   font-size:1.6rem;
   }
@media(min-width:1200px){ 
  h1,h2 { font-size:2rem; }
 }

input[type="text"] {
  width:86%;
  padding:12px;
  font-size:1.05em;
  border-radius:10px;
  border:1px solid #e6e6e6;
  margin-bottom:14px;
  box-sizing:border-box;
}

.difficulty-row {
  display:flex;
  gap:12px;
  justify-content:center;
  margin-bottom:12px;
  flex-wrap:wrap;
}
.diff-btn {
  border:none;
  border-radius:12px;
  padding:10px 16px;
  cursor:pointer;
  background:#fff;
  color:#111;
  font-weight:700;
  display:flex;
  gap:8px;
  align-items:center;
  box-shadow:0 6px 18px rgba(0,0,0,0.06);
  transition:transform .18s ease, box-shadow .18s ease, background .18s;
  min-width:110px;
  justify-content:center;
}
.diff-btn span { 
  font-size:1.05em; 
}
.diff-btn:hover { 
  transform:translateY(-6px) scale(1.02); 
  box-shadow:0 10px 28px rgba(0,0,0,0.12);
 }

.diff-btn[data-diff="beginner"] { 
  background: linear-gradient(135deg,#e6ffe9,#d0ffd8); color:#006b2e;
 }
.diff-btn[data-diff="intermediate"] {
   background: linear-gradient(135deg,#fff6e6,#ffe8c7); color:#7a4b00;
   }
.diff-btn[data-diff="advanced"] {
   background: linear-gradient(135deg,#ffe6ff,#ffd0ff); color:#6b006b;
   }

.diff-btn.selected {
   box-shadow:0 18px 40px rgba(0,0,0,0.18);
    transform:translateY(-8px) scale(1.03);
     outline: 4px solid rgba(0,255,150,0.12);
     }

.start-row {
   display:flex; 
   gap:12px;
    justify-content:center; 
    margin-top:12px;
     flex-wrap:wrap;
     }
.primary-btn {
  border:none; 
  border-radius:12px; 
  padding:12px 20px; 
  font-size:1em;
   cursor:pointer;
  background:linear-gradient(135deg,var(--accent1),var(--accent2));
  color:#fff; 
  font-weight:700; 
  box-shadow:0 8px 30px rgba(0,0,0,0.12); 
  transition:transform .18s;
}
.primary-btn:hover {
   transform:scale(1.04); 
  }
.secondary-btn { 
  background:#fff;
   color:var(--accent1);
    border:2px solid var(--accent1);
    border-radius:12px;
     padding:10px 16px; 
    }

.hint {
   margin-top:8px;
    color:var(--muted);
     font-size:0.95em;
     }

.timer-area { 
  display:flex; 
  align-items:center; 
  justify-content:space-between; 
  margin-bottom:18px;
   gap:12px;
    flex-wrap:wrap; 
  }
#timer-circle { 
  width:70px;
   height:70px; 
   border:5px solid var(--accent2); border-radius:50%;
    display:flex;
     align-items:center; 
     justify-content:center; 
     font-size:1.2em;
      font-weight:700;
       background:#fff;
        animation:pulse 1.5s infinite; 
      }
@keyframes pulse { 
  0%{transform:scale(1);} 50%{transform:scale(1.04);} 100%{transform:scale(1);} 
}

.progress-bar {
   flex:1;
    height:14px;
     background:#eee;
      border-radius:8px;
       overflow:hidden;
        margin-left:12px;
         min-width:140px;
         }
.progress { 
  height:100%;
   width:0%;
    background:linear-gradient(90deg,var(--accent2),var(--accent1));
     transition:width 1s linear;
     }

.question {
   font-size:1.05rem;
    margin:16px 0;
     min-height:48px;
      font-weight:600;
       color:var(--text-strong);
       }
.options {
   list-style:none; 
   padding:0;
    margin:0;
     display:flex; 
     flex-direction:column;
      gap:10px; 
    }
.option-btn {
  background:#fff; 
  color:var(--accent1);
   border:2px solid var(--accent1);
    font-weight:700;
     border-radius:12px; 
     padding:12px 16px;
      cursor:pointer;
  transition:transform .18s, box-shadow .18s;
   box-shadow:0 6px 20px rgba(0,0,0,0.06); 
   text-align:left;
}
.option-btn:hover {
   transform:scale(1.03); 
  }
.option-btn.correct {
   background:var(--accent2);
    color:#003;
     border-color:var(--accent2);
     }
.option-btn.wrong {
   background:#ff5c5c;
    color:#fff; 
    border-color:#ff5c5c;
   }

.option-btn.selected-by-keyboard { 
  outline: 3px solid rgba(0,255,150,0.9);
   box-shadow: 0 10px 30px rgba(0,255,150,0.12);
   }

.result-screen.hidden { 
  display:none; 
}
.result-screen .trophy {
  font-size:3em; 
  margin-bottom:12px;
   transform:scale(0);
    animation: trophy-pop 0.8s forwards;
   }
@keyframes trophy-pop {
   0%{transform:scale(0);} 50%{transform:scale(1.5);} 100%{transform:scale(1);}
   }

.share-row { 
  display:flex;
   justify-content:center;
    gap:12px;
     margin-bottom:18px; 
     flex-wrap:wrap;
     }
.share-btn {
   background:linear-gradient(135deg,var(--accent2),var(--accent1)); color:#fff;
    border-radius:50%;
     padding:12px; 
     font-size:1.3em; 
     cursor:pointer;
      box-shadow:0 6px 16px rgba(0,0,0,0.14);
     }
.share-btn:hover {
   transform:scale(1.15) rotate(-10deg);
   }

.music-btn {
   position:fixed;
    top:16px;
     right:16px;
      z-index:10; 
      background:linear-gradient(135deg,var(--accent2),var(--accent1));
       color:#fff;
        border-radius:50%; 
        padding:12px;
         font-size:1.2em; 
         cursor:pointer;
          box-shadow:0 6px 16px rgba(0,0,0,0.18);
         }
.music-btn.active {
   animation: musicGlow 1.2s ease-in-out infinite alternate; 
  }
@keyframes musicGlow { 
  from { box-shadow:0 6px 18px rgba(0,255,150,0.3);} to { box-shadow:0 12px 36px rgba(0,255,150,0.9); 
  transform:rotate(6deg);}
 }

.confetti-piece {
   position:absolute; 
   width:10px;
    height:10px;
     border-radius:50%;
      opacity:0.95;
       animation: confetti-fall linear forwards;
       }
@keyframes confetti-fall {
   to { transform: translateY(100vh) rotate(360deg); opacity:0.2; }
   }

#lightning-overlay {
   position: fixed;
    top:0; left:0;
     width:100vw; 
     height:100vh;
      background: rgba(255,255,255,0.8);
       pointer-events: none; 
       opacity:0;
        z-index:999; 
      }
.lightning-flash {
   animation: lightning-strike 0.35s ease-out;
   }
@keyframes lightning-strike { 
  0%{opacity:1;} 50%{opacity:0.4;} 100%{opacity:0;} 
}

#leaderboard-container { 
  display:none;
   padding:22px;
   }
#leaderboard-list { 
  list-style:none;
   padding:0; 
   margin:0; 
  }

.leader-item {
  display:flex;
   justify-content:space-between;
    align-items:center;
     padding:14px 20px;
      margin:8px 0;
  background:rgba(0,255,136,0.05);
   border-radius:14px;
    color:var(--text-strong);
     font-weight:700;
      font-size:1.05rem;
  opacity:0; 
  transform:translateY(-20px); 
  box-shadow:0 6px 20px rgba(0,0,0,0.08);
   animation: slideIn 0.45s forwards;
    transition: transform 0.3s, box-shadow 0.3s, background 0.3s;
}
.leader-item:hover {
   transform:scale(1.03); box-shadow:0 12px 28px rgba(0,0,0,0.16);
    background:rgba(0,255,136,0.12); 
  }

.rank {
   flex:0 0 56px;
    font-size:1.05em;
     display:flex; 
     align-items:center; 
     justify-content:center;
     }
.player-name { 
  flex:1;
   text-align:left;
    margin-left:12px;
     word-break:break-word;
     }
.player-score { 
  flex:0 0 56px;
   text-align:right; 
  }

@keyframes slideIn {
   from { opacity:0; 
    transform:translateY(-30px);} to { opacity:1;
       transform:translateY(0);}
       }
@keyframes crownBounce {
   0% { transform:translateY(0);} 50% { transform:translateY(-6px);} 100% { transform:translateY(0);}
   }
.leader-item.new {
   background: rgba(0,255,150,0.2); 
   animation: newScoreFlash 1s ease-out; 
  }
@keyframes newScoreFlash { 
  0% { background: rgba(0,255,150,0.5);} 100% { background: rgba(0,255,150,0.05);}
 }

.leader-item.new-high-score {
   background: rgba(255,255,255,0.1);
    border-radius:12px;
   }
.crown {
   display:inline-block; 
   font-size:1.3em; 
   margin-right:6px;
    transform-origin:center bottom; 
    animation:crownFloat 1.8s ease-in-out infinite alternate;
   }
.crown.gold {
   color: gold; 
   text-shadow: 0 0 6px #ffd700, 0 0 12px #ffe600; 
   filter: drop-shadow(0 0 4px rgba(255,255,255,0.7));
   }
.crown.silver {
   color:#c0c0c0;
    text-shadow:0 0 6px #eee, 0 0 12px #ccc; 
  }
.crown.bronze {
   color:#cd7f32; 
   text-shadow:0 0 6px #d58f5c, 0 0 12px #c86d34; 
  }
@keyframes crownFloat {
   0% { transform: translateY(0) rotate(0deg); } 50% { transform: translateY(-3px) rotate(5deg); } 100% { transform: translateY(0) rotate(-3deg); }
   }

@media (max-width: 900px) {
  .centered-container, .result-screen, #leaderboard-container { 
    width:95%; 
    padding:20px;
     margin:32px auto; 
    }
  h1,h2 { 
    font-size:1.4rem; 
  }
  .option-btn { 
    padding:14px 16px; font-size:1rem; 
  }
  .progress-bar {
     min-width:120px;
     }
  #timer-circle {
     width:64px;
      height:64px;
       font-size:1em;
       }
  .diff-btn { 
    min-width:95px; 
    padding:10px 12px;
   }
  .leader-item {
     padding:12px 14px; 
     font-size:1rem; }
}

@media (max-width: 600px) {
  body { align-items:flex-start; }
  .centered-container, .result-screen, #leaderboard-container { 
    margin:20px 12px; padding:16px; border-radius:14px; 
  }
  h1,h2 {
     font-size:1.2rem; 
    }
  input[type="text"] {
     width:100%;
      padding:12px;
     }
  .option-btn {
     padding:14px 14px; 
     font-size:1rem;
      border-width:2px; 
    }
  .timer-area { 
    flex-direction:row; 
    gap:8px; 
    align-items:center;
   }
  .progress-bar { 
    margin-left:8px;
     height:12px;
     }
  #timer-circle {
     width:54px;
      height:54px;
       font-size:0.95em;
        border-width:4px;
       }

  .leader-item {
     flex-direction:column; 
     align-items:flex-start; 
     gap:8px;
      padding:12px;
     }
  .rank, .player-score { 
    flex:0 0 auto;
     width:auto;
      text-align:left;
     }
  .player-name { 
    margin-left:0;
     width:100%;
      font-size:0.98rem;
     }

  .confetti-piece {
     width:8px; 
     height:8px;
      animation-duration: 1.2s; }
}

@media (max-width: 400px) {
  .diff-btn { font-size:0.9rem;
     padding:8px 10px;
      min-width:80px; 
    }
  .primary-btn {
     padding:10px 14px;
      font-size:0.95rem; 
    }
  .leader-item {
     font-size:0.95rem;
      padding:10px; 
    }
  .share-btn {
     padding:10px; 
     font-size:1.1em; }
}

@media (min-width: 1400px) {
  :root { --max-width:1000px; }
  .centered-container, .result-screen, #leaderboard-container {
     margin-top:80px; padding:32px 32px;
     }
  .option-btn {
     padding:14px 18px; 
    }
}
